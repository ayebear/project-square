!function(){"use strict";function t(t){return"function"==typeof t}function e(t){return""+(t.x||0)+","+(t.y||0)}function n(t){var e=t.split(",");return e.length=2,{x:parseInt(e[0])||0,y:parseInt(e[1])||0}}function i(t){t.children.sort(function(t,e){return t.zIndex=t.zIndex||0,e.zIndex=e.zIndex||0,t.zIndex-e.zIndex})}function o(t,e){return e={exports:{}},t(e,e.exports),e.exports}function r(t,e){var n=A.getVisualPosition(e);if(n.x!==t.x||n.y!==t.y)return n}function s(){var t=PIXI.loader;t.add("textures","data/textures-1.json"),t.load(a)}function a(){E.init(),requestAnimationFrame(u)}function u(t){P.val=(t-W)/1e3,W=t,P.total=t,E.run();var e=!1;return N.process("redirect",function(t){window.location=t,e=!0}),!e&&void requestAnimationFrame(u)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},h=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),p=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},f=function(){function t(e,n){c(this,t),this.world=e,this.id=n,this.data={},this.world.index.add(this)}return h(t,[{key:"has",value:function(){for(var t=this,e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var o=[].concat(n);return o.every(function(e){return e in t.data})}},{key:"get",value:function(t){if(this.has(t))return this.data[t]}},{key:"access",value:function(t){return this.has(t)||this.set(t),this.data[t]}},{key:"set",value:function(t){for(var e=this.world.components[t],n="undefined"==typeof e?"undefined":l(e),i=arguments.length,o=Array(i>1?i-1:0),r=1;r<i;r++)o[r-1]=arguments[r];return"function"===n?this.data[t]=new(Function.prototype.bind.apply(e,[null].concat(o))):"string"===n?this.data[t]=JSON.parse(e):"undefined"===n&&o.length>0?this.data[t]=o[0]:this.data[t]={},this.world.index.add(this,t),this}},{key:"update",value:function(t,e){var n=this.access(t);for(var i in e)n[i]=e[i];return this}},{key:"remove",value:function(t){if(t in this.data){this.world.index.remove(this,t);var e=this.data[t];"function"==typeof e.onRemove&&e.onRemove(),delete this.data[t]}return this}},{key:"removeAll",value:function(){for(var t in this.data)this.remove(t);this.data={}}},{key:"destroy",value:function(){this.id&&(this.removeAll(),this.world.index.remove(this),delete this.world.entities[this.id],this.id=void 0)}},{key:"valid",value:function(){return this.world&&void 0!==this.id}},{key:"toString",value:function(){return String(this.id)}},{key:"toJSON",value:function(){return JSON.stringify(this.data)}},{key:"fromJSON",value:function(t){var e=JSON.parse(t);for(var n in e){var i=this.access(n);"function"==typeof i.fromJSON?i.fromJSON(e[n]):this.update(n,e[n])}return this}}]),t}(),v=f,d={Entity:v},y=function(){function t(e){c(this,t),this.clear(e)}return h(t,[{key:"clear",value:function(t){this.entities=t,this.index={}}},{key:"query",value:function(t){var e=this.hashComponents(t);return e in this.index?this.index[e].entities:this.build(e,t).entities}},{key:"hashComponents",value:function(t){return t.concat().sort().join(":")}},{key:"build",value:function(t,e){var n=new Map;for(var i in this.entities){var o=this.entities[i];o.has.apply(o,p(e))&&n.set(o.toString(),o)}return this.index[t]={components:new Set(e),entities:n}}},{key:"apply",value:function(t,e){for(var n in this.index){var i=this.index[n];(i.components.has(t)||void 0==t&&0==i.components.size)&&e(i.entities)}}},{key:"add",value:function(t,e){this.apply(e,function(e){e.set(t.toString(),t)})}},{key:"remove",value:function(t,e){this.apply(e,function(e){e.delete(t.toString())})}}]),t}(),m=y,g={Index:m},k=d.Entity,w=g.Index,x=function(){function e(){c(this,e),this.systems=[],this.entities={},this.components={},this.entityTemplates={},this.idCounter=1,this.index=new w(this.entities)}return h(e,[{key:"clear",value:function(){this.entities={},this.index.clear(this.entities)}},{key:"component",value:function(t,e){"object"===("undefined"==typeof e?"undefined":l(e))&&(e=JSON.stringify(e));var n="undefined"==typeof e?"undefined":l(e);if("function"===n||"string"===n||"undefined"===n)return this.components[t]=e,t}},{key:"entity",value:function(t){var e=this.idCounter++,n=new k(this,e);if(t&&t in this.entityTemplates){var i=this.entityTemplates[t];for(var o in i){var r=JSON.parse(i[o]);n.update(o,r)}}return this.entities[e]=n,n}},{key:"system",value:function(e,n){if(t(n)){var i=new n;return i.components=e,this.systems.push(i),this.systems.length-1}}},{key:"init",value:function(){var e=!0,n=!1,i=void 0;try{for(var o,r=this.systems[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var s=o.value;t(s.init)&&s.init.call(s)}}catch(t){n=!0,i=t}finally{try{!e&&r.return&&r.return()}finally{if(n)throw i}}}},{key:"run",value:function(){var e=!0,n=!1,i=void 0;try{for(var o,r=this.systems[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var s=o.value;t(s.pre)&&s.pre.call(s),t(s.every)&&this.every(s.components,s.every,s),t(s.post)&&s.post.call(s)}}catch(t){n=!0,i=t}finally{try{!e&&r.return&&r.return()}finally{if(n)throw i}}}},{key:"every",value:function(e,n,i){var o=this.index.query(e);if(t(n)){var r=!0,s=!1,a=void 0;try{for(var u,l=function(){var t=u.value;if(t.has.apply(t,p(e))){var o=e.map(function(e){return t.get(e)});o.push(t),void 0===i?n.apply(void 0,p(o)):n.call.apply(n,[i].concat(p(o)))}},c=o.values()[Symbol.iterator]();!(r=(u=c.next()).done);r=!0)l()}catch(t){s=!0,a=t}finally{try{!r&&c.return&&c.return()}finally{if(s)throw a}}}return o.values()}},{key:"prototype",value:function(t){var e=0;if("string"==typeof t&&(t=JSON.parse(t)),"object"===("undefined"==typeof t?"undefined":l(t)))for(var n in t){var i=t[n],o={};for(var r in i)o[r]=JSON.stringify(i[r]);this.entityTemplates[n]=o,++e}return e}}]),e}(),z=x;Math.toRadians=function(t){return t*Math.PI/180},Math.toDegrees=function(t){return 180*t/Math.PI};var b=function(){function t(){c(this,t),this.clear()}return h(t,[{key:"clear",value:function(){this.index={},this.previous={}}},{key:"update",value:function(t){var n=t.get("position");if(n){var i=e(n);i in this.index||(this.index[i]=new Map),this.index[i].has(t.toString())||(this.index[i].set(t.toString(),t),t.toString()in this.previous&&this.index[this.previous[t.toString()]].delete(t.toString()),this.previous[t.toString()]=i)}}},{key:"get",value:function(t){var n=this.index[e(t)];return n?n:new Map}},{key:"remove",value:function(t){var n=t.get("position");if(n){var i=e(n);i in this.index&&this.index[i].delete(t.toString()),delete this.previous[t.toString()]}}},{key:"has",value:function(t){for(var e=this.get(t.get("position")),n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var r=!0,s=!1,a=void 0;try{for(var u,l=e.values()[Symbol.iterator]();!(r=(u=l.next()).done);r=!0){var c=u.value;if(c.has.apply(c,i))return!0}}catch(t){s=!0,a=t}finally{try{!r&&l.return&&l.return()}finally{if(s)throw a}}return!1}}]),t}(),T=function(){function t(){c(this,t),this.loaders={}}return h(t,[{key:"setData",value:function(t){this.fullMapData=t.layers,this.options={tileSize:t.tileSize,idToName:t.idToName,nameToId:t.nameToId}}},{key:"register",value:function(t,e){var n=!0,i=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var a=r.value;a in this.loaders?this.loaders[a].push(e):this.loaders[a]=[e]}}catch(t){i=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}}},{key:"loadTiles",value:function(t){var e=this;t.puzzle||(t.puzzle={}),t.puzzle.position||(t.puzzle.position={x:128,y:128}),this.clearEntities();var n={};this.forEachTile(t.layer,function(i){var o=t.animate===!1?void 0:t.puzzle.position,r=e.createEntity(i,void 0,o);if(i.name in e.loaders){var s=!0,a=!1,u=void 0;try{for(var l,c=e.loaders[i.name][Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var h=l.value;h(r,i)}}catch(t){a=!0,u=t}finally{try{!s&&c.return&&c.return()}finally{if(a)throw u}}}else i.name in n?n[i.name]++:n[i.name]=1}),console.log("Tile types without registered loaders:"),console.log(n)}},{key:"forEachTile",value:function(t,e){for(var i in this.fullMapData[t]){var o=this.fullMapData[t][i],r=0,s=!0,a=!1,u=void 0;try{for(var l,c=o[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var h=l.value,p={id:i,name:this.options.idToName[h],position:n(i),spritePosition:this.getVisualPosition(n(i)),layer:t,layerLevel:r};e(p),++r}}catch(t){a=!0,u=t}finally{try{!s&&c.return&&c.return()}finally{if(a)throw u}}}}},{key:"getVisualPosition",value:function(t){return{x:t.x*this.options.tileSize.width,y:t.y*this.options.tileSize.height}}},{key:"createEntity",value:function(t,e,n){e=e||t.layerLevel+1;var i=n?this.getVisualPosition(n):t.spritePosition,o=E.entity().set("position",t.position.x,t.position.y).set("sprite",M,t.name,e,i).set("partOfLayer",t.layer);return n&&o.set("loadAnimation"),C.update(o),o}},{key:"clearEntities",value:function(){E.every(["partOfLayer"],function(t,e){C.remove(e),e.destroy()})}}]),t}(),E=new z,P={val:0,total:0},_={width:window.innerWidth-4,height:window.innerHeight-4},I=new PIXI.Container,S=new PIXI.Container,M=new PIXI.Container,D=new PIXI.Container;I.addChild(S),I.addChild(M),I.addChild(D);var C=new b,A=new T,O=function(){function t(){c(this,t),this.data={}}return h(t,[{key:"exists",value:function(t){return t in this.data}},{key:"count",value:function(t){return t in this.data?this.data[t].length:0}},{key:"send",value:function(t,e){t in this.data||(this.data[t]=[]),this.data[t].push(e)}},{key:"loop",value:function(t,e){if(t in this.data){var n=this.data[t],i=!0,o=!1,r=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var u=s.value;e(u)}}catch(t){o=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}}}},{key:"process",value:function(t,e){this.loop(t,e),this.clear(t)}},{key:"clear",value:function(t){delete this.data[t]}},{key:"clearAll",value:function(){this.data={}}}]),t}(),N=new O,L=o(function(t,e){var n=n||function(){var t=[];return{getAll:function(){return t},removeAll:function(){t=[]},add:function(e){t.push(e)},remove:function(e){var n=t.indexOf(e);n!==-1&&t.splice(n,1)},update:function(e,i){if(0===t.length)return!1;var o=0;for(e=void 0!==e?e:n.now();o<t.length;)t[o].update(e)||i?o++:t.splice(o,1);return!0}}}();"undefined"==typeof window&&"undefined"!=typeof process?n.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?n.now=window.performance.now.bind(window.performance):void 0!==Date.now?n.now=Date.now:n.now=function(){return(new Date).getTime()},n.Tween=function(t){var e,i=t,o={},r={},s={},a=1e3,u=0,l=!1,c=!1,h=!1,p=0,f=null,v=n.Easing.Linear.None,d=n.Interpolation.Linear,y=[],m=null,g=!1,k=null,w=null,x=null;this.to=function(t,e){return r=t,void 0!==e&&(a=e),this},this.start=function(t){n.add(this),c=!0,g=!1,f=void 0!==t?t:n.now(),f+=p;for(var e in r){if(r[e]instanceof Array){if(0===r[e].length)continue;r[e]=[i[e]].concat(r[e])}void 0!==i[e]&&(o[e]=i[e],o[e]instanceof Array==!1&&(o[e]*=1),s[e]=o[e]||0)}return this},this.stop=function(){return c?(n.remove(this),c=!1,null!==x&&x.call(i,i),this.stopChainedTweens(),this):this},this.end=function(){return this.update(f+a),this},this.stopChainedTweens=function(){for(var t=0,e=y.length;t<e;t++)y[t].stop()},this.delay=function(t){return p=t,this},this.repeat=function(t){return u=t,this},this.repeatDelay=function(t){return e=t,this},this.yoyo=function(t){return l=t,this},this.easing=function(t){return v=t,this},this.interpolation=function(t){return d=t,this},this.chain=function(){return y=arguments,this},this.onStart=function(t){return m=t,this},this.onUpdate=function(t){return k=t,this},this.onComplete=function(t){return w=t,this},this.onStop=function(t){return x=t,this},this.update=function(t){var n,c,x;if(t<f)return!0;g===!1&&(null!==m&&m.call(i,i),g=!0),c=(t-f)/a,c=c>1?1:c,x=v(c);for(n in r)if(void 0!==o[n]){var z=o[n]||0,b=r[n];b instanceof Array?i[n]=d(b,x):("string"==typeof b&&(b="+"===b.charAt(0)||"-"===b.charAt(0)?z+parseFloat(b):parseFloat(b)),"number"==typeof b&&(i[n]=z+(b-z)*x))}if(null!==k&&k.call(i,x),1===c){if(u>0){isFinite(u)&&u--;for(n in s){if("string"==typeof r[n]&&(s[n]=s[n]+parseFloat(r[n])),l){var T=s[n];s[n]=r[n],r[n]=T}o[n]=s[n]}return l&&(h=!h),f=void 0!==e?t+e:t+p,!0}null!==w&&w.call(i,i);for(var E=0,P=y.length;E<P;E++)y[E].start(f+a);return!1}return!0}},n.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-n.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*n.Easing.Bounce.In(2*t):.5*n.Easing.Bounce.Out(2*t-1)+.5}}},n.Interpolation={Linear:function(t,e){var i=t.length-1,o=i*e,r=Math.floor(o),s=n.Interpolation.Utils.Linear;return e<0?s(t[0],t[1],o):e>1?s(t[i],t[i-1],i-o):s(t[r],t[r+1>i?i:r+1],o-r)},Bezier:function(t,e){for(var i=0,o=t.length-1,r=Math.pow,s=n.Interpolation.Utils.Bernstein,a=0;a<=o;a++)i+=r(1-e,o-a)*r(e,a)*t[a]*s(o,a);return i},CatmullRom:function(t,e){var i=t.length-1,o=i*e,r=Math.floor(o),s=n.Interpolation.Utils.CatmullRom;return t[0]===t[i]?(e<0&&(r=Math.floor(o=i*(1+e))),s(t[(r-1+i)%i],t[r],t[(r+1)%i],t[(r+2)%i],o-r)):e<0?t[0]-(s(t[0],t[0],t[1],t[1],-o)-t[0]):e>1?t[i]-(s(t[i],t[i],t[i-1],t[i-1],o-i)-t[i]):s(t[r?r-1:0],t[r],t[i<r+1?i:r+1],t[i<r+2?i:r+2],o-r)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var i=n.Interpolation.Utils.Factorial;return i(t)/i(e)/i(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var i=e;i>1;i--)n*=i;return t[e]=n,n}}(),CatmullRom:function(t,e,n,i,o){var r=.5*(n-t),s=.5*(i-e),a=o*o,u=o*a;return(2*e-2*n+r+s)*u+(-3*e+3*n-2*r-s)*a+r*o+e}}},function(e){t.exports=n}(this)});E.component("position",function(t,e){var n=this;this.set=function(t,e){n.x=t||0,n.y=e||0},this.set(t,e)}),E.component("sprite",function(t,e,n,o){var r=this;this.create=function(t,e,n,o){e?r.sprite=new PIXI.Sprite(PIXI.utils.TextureCache[e+".png"]):r.sprite=new PIXI.Sprite,r.sprite.anchor.x=.5,r.sprite.anchor.y=.5,r.sprite.zIndex=n||0,o&&(r.sprite.position.x=o.x,r.sprite.position.y=o.y),t.addChild(r.sprite),i(t)},this.onRemove=function(){t.removeChild(r.sprite)},this.set=function(t){r.sprite.texture=PIXI.utils.TextureCache[t+".png"]},this.setZIndex=function(e){r.sprite.zIndex=e||0,i(t)},this.create(t,e,n,o)}),E.component("inputMovement",function(t){this.tilesPerSecond=t||4,this.currentDirection={x:0,y:0},this.lastDirection={x:0,y:0}}),E.component("pixiStage",function(t){this.root=t}),E.component("cameraFollows",function(){var t=this;this.update=function(){t.center=!0;var e=.33,n=I.scale.x;t.borderSize={x:e*(_.width/n),y:e*(_.height/n)},t.deadzone=new PIXI.Rectangle(t.borderSize.x,t.borderSize.y,_.width/n-2*t.borderSize.x,_.height/n-2*t.borderSize.y)},this.update()}),E.component("weight",function(){}),E.component("logicAction",function(t){this.action=t}),E.component("logic",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.onEnter=t.onEnter,this.onExit=t.onExit,this.onMove=t.onMove,this.onChange=t.onChange,this.onCreate=t.onCreate,this.onDestroy=t.onDestroy}),E.component("partOfLayer",function(t){this.layer=t}),E.component("puzzlePortal",function(t){this.puzzle=t}),E.component("puzzleGoal",function(t){this.completed=t||!1}),E.component("pushable"),E.component("pollutionImmune",function(t){this.count=t||0}),E.component("hasPackage",function(t){this.name=t||"package"}),E.component("package",function(t){this.name=t||"package"}),E.component("goal",function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.solved=t}),E.component("tween",function(t,e,n){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;this.oldPosition=n,this.tween=new L.Tween(e).to(n,o).onComplete(function(){t.remove("tween")}).start(),this.updateAll=function(){L.update(P.total)},this.update=function(t){t.x===i.oldPosition.x&&t.y===i.oldPosition.y||(i.oldPosition=t,i.tween.stop(),i.tween.to(t,o).start())}}),E.component("wall"),E.component("blocksMovement"),E.component("player"),E.component("block"),E.component("vehicle"),E.component("button"),E.component("destination"),E.component("pushes"),E.component("driver"),E.component("pollutes"),E.component("pollution"),E.component("enterable");var R={world:{"116,80":[73],"117,80":[73],"118,80":[73],"119,80":[73],"120,80":[73],"121,80":[73],"122,80":[73],"123,80":[73],"124,80":[73],"125,80":[73],"126,80":[73],"127,80":[73],"128,80":[73],"129,80":[73],"130,80":[73],"131,80":[73],"132,80":[73],"133,80":[73],"134,80":[73],"135,80":[73],"136,80":[73],"137,80":[73],"138,80":[73],"139,80":[73],"116,81":[73],"117,81":[73],"118,81":[73],"119,81":[73],"120,81":[73],"121,81":[73],"122,81":[73],"123,81":[73],"124,81":[73],"125,81":[73],"126,81":[73],"127,81":[73],"128,81":[73],"129,81":[73],"130,81":[73],"131,81":[73],"132,81":[73],"133,81":[73],"134,81":[73],"135,81":[73],"136,81":[73],"137,81":[73],"138,81":[73],"139,81":[73],"116,82":[73],"117,82":[73],"138,82":[73],"139,82":[73],"140,82":[73],"141,82":[83],"116,83":[73],"117,83":[73],"138,83":[73],"139,83":[73],"116,84":[73],"117,84":[73],"138,84":[73],"139,84":[73],"116,85":[73],"117,85":[73],"138,85":[73],"139,85":[73],"116,86":[73],"117,86":[73],"138,86":[73],"139,86":[73],"116,87":[73],"117,87":[73],"136,87":[83],"137,87":[73],"138,87":[73],"139,87":[73],"116,88":[73],"117,88":[73],"138,88":[73],"139,88":[73],"116,89":[73],"117,89":[73],"138,89":[73],"139,89":[73],"140,89":[73],"141,89":[83],"116,90":[73],"117,90":[73],"118,90":[73],"119,90":[83],"138,90":[73],"139,90":[73],"114,91":[83],"115,91":[73],"116,91":[73],"117,91":[73],"138,91":[73],"139,91":[73],"116,92":[73],"117,92":[73],"138,92":[73],"139,92":[73],"116,93":[73],"117,93":[73],"138,93":[73],"139,93":[73],"116,94":[73],"117,94":[73],"138,94":[73],"139,94":[73],"116,95":[73],"117,95":[73],"138,95":[73],"139,95":[73],"116,96":[73],"117,96":[73],"138,96":[73],"139,96":[73],"140,96":[83],"114,97":[83],"115,97":[73],"116,97":[73],"117,97":[73],"138,97":[73],"139,97":[73],"116,98":[73],"117,98":[73],"136,98":[83],"137,98":[73],"138,98":[73],"139,98":[73],"116,99":[73],"117,99":[73],"138,99":[73],"139,99":[73],"116,100":[73],"117,100":[73],"138,100":[73],"139,100":[73],"116,101":[73],"117,101":[73],"138,101":[73],"139,101":[73],"116,102":[73],"117,102":[73],"118,102":[73],"119,102":[83],"138,102":[73],"139,102":[73],"116,103":[73],"117,103":[73],"138,103":[73],"139,103":[73],"116,104":[73],"117,104":[73],"138,104":[73],"139,104":[73],"140,104":[83],"116,105":[73],"117,105":[73],"138,105":[73],"139,105":[73],"116,106":[73],"117,106":[73],"138,106":[73],"139,106":[73],"115,107":[83],"116,107":[73],"117,107":[73],"118,107":[73],"119,107":[83],"138,107":[73],"139,107":[73],"116,108":[73],"117,108":[73],"138,108":[73],"139,108":[73],"116,109":[73],"117,109":[73],"138,109":[73],"139,109":[73],"116,110":[73],"117,110":[73],"138,110":[73],"139,110":[73],"116,111":[73],"117,111":[73],"138,111":[73],"139,111":[73],"116,112":[73],"117,112":[73],"138,112":[73],"139,112":[73],"116,113":[73],"117,113":[73],"138,113":[73],"139,113":[73],"140,113":[83],"116,114":[73],"117,114":[73],"138,114":[73],"139,114":[73],"116,115":[73],"117,115":[73],"138,115":[73],"139,115":[73],"115,116":[83],"116,116":[73],"117,116":[73],"138,116":[73],"139,116":[73],"116,117":[73],"117,117":[73],"138,117":[73],"139,117":[73],"116,118":[73],"117,118":[73],"138,118":[73],"139,118":[73],"116,119":[73],"117,119":[73],"138,119":[73],"139,119":[73],"116,120":[73],"117,120":[73],"138,120":[73],"139,120":[73],"140,120":[83],"116,121":[73],"117,121":[73],"118,121":[73],"119,121":[83],"138,121":[73],"139,121":[73],"116,122":[73],"117,122":[73],"138,122":[73],"139,122":[73],"116,123":[73],"117,123":[73],"138,123":[73],"139,123":[73],"115,124":[83],"116,124":[73],"117,124":[73],"138,124":[73],"139,124":[73],"116,125":[73],"117,125":[73],"119,125":[125],"135,125":[125],"136,125":[125],"138,125":[73],"139,125":[73],"116,126":[73],"117,126":[73],"128,126":[83],"138,126":[73],"139,126":[73],"116,127":[73],"117,127":[73],"118,127":[73],"119,127":[73],"120,127":[73],"121,127":[73],"122,127":[73],"123,127":[73],"124,127":[73],"125,127":[73],"126,127":[73],"127,127":[73],"128,127":[73],"129,127":[73],"130,127":[73],"131,127":[73],"132,127":[126],"133,127":[73],"134,127":[73],"135,127":[73],"136,127":[73],"137,127":[73],"138,127":[73],"139,127":[73],"116,128":[73],"117,128":[73],"118,128":[73],"119,128":[73],"120,128":[73],"121,128":[73],"122,128":[73],"123,128":[73],"124,128":[73],"125,128":[73],"126,128":[73],"127,128":[73],"128,128":[73],"129,128":[73],"130,128":[73],"131,128":[73],"132,128":[126],"133,128":[73],"134,128":[73],"135,128":[73],"136,128":[73],"137,128":[73],"138,128":[73],"139,128":[73],"140,128":[83],"120,129":[83],"125,129":[95],"131,129":[95],"135,129":[126],"125,130":[95],"128,130":[113],"131,130":[95],"135,130":[126],"125,131":[95],"131,131":[95],"135,131":[83],"125,132":[95],"126,132":[95],"127,132":[95],"128,132":[95],"129,132":[95],"130,132":[95],"131,132":[95]},"lvl-141,82":{"142,82":[111],"141,81":[73],"140,82":[111],"141,83":[73],"142,83":[73],"141,82":[73,87],"140,83":[111],"141,84":[111],"142,84":[111],"140,84":[111],"143,84":[111],"144,84":[111],"143,83":[73,117],"144,83":[73],"143,82":[111],"144,82":[73],"143,81":[73],"144,81":[73],"143,80":[111],"142,81":[73],"142,80":[111],"141,80":[111],"140,80":[111],"140,81":[111],"144,80":[111],"145,80":[73],"144,79":[111],"145,79":[111],"146,79":[111],"147,79":[111],"146,80":[73],"147,80":[111],"146,81":[73],"147,81":[73],"145,81":[73,117],"146,82":[73],"147,82":[73],"145,82":[73,117],"146,83":[73],"147,83":[73,85],"145,83":[73,120,118],"146,84":[111],"147,84":[111],"145,84":[111],"148,84":[111],"148,83":[111],"148,82":[111],"148,81":[111],"148,80":[111]},"lvl-136,87":{"137,87":[111],"136,86":[73],"135,87":[111],"136,88":[73],"137,88":[111],"136,87":[73,87],"135,88":[111],"136,89":[73],"137,89":[111],"135,89":[111],"136,90":[73],"137,90":[111],"135,90":[111],"136,91":[73],"137,91":[111],"135,91":[111],"136,92":[73],"137,92":[111],"135,92":[111],"136,93":[73,85],"137,93":[111],"135,93":[111],"136,94":[111],"137,94":[111],"135,94":[111],"134,94":[111],"134,93":[73,120,118],"133,94":[111],"133,93":[73,118],"132,94":[111],"132,93":[73,118],"131,94":[111],"131,93":[73,118],"130,94":[111],"130,93":[73,118],"129,94":[111],"129,93":[73,118],"128,94":[111],"128,93":[73,118],"127,94":[111],"127,93":[73,120],"126,94":[111],"126,93":[111],"126,92":[111],"127,92":[73,117],"126,91":[111],"127,91":[73,117],"126,90":[111],"127,90":[73,117],"126,89":[111],"127,89":[73,117],"126,88":[111],"127,88":[73,117],"126,87":[111],"127,87":[73,117],"126,86":[111],"127,86":[73,117],"126,85":[111],"127,85":[73,117],"126,84":[111],"127,84":[73,120],"126,83":[111],"127,83":[111],"128,83":[111],"129,83":[111],"128,84":[73,122],"129,84":[111],"128,85":[73,118],"129,85":[111],"128,86":[73,118],"129,86":[111],"128,87":[73,118],"129,87":[111],"128,88":[73,118],"129,88":[111],"128,89":[73,118],"129,89":[111],"128,90":[73,118],"129,90":[111],"128,91":[73,118],"129,91":[111],"128,92":[73,118],"129,92":[111],"130,92":[73,118],"131,92":[111],"130,91":[73,122],"131,91":[73,117],"130,90":[73,122],"131,90":[73,117],"130,89":[73,122],"131,89":[73,117],"130,88":[73,122],"131,88":[73,117],"130,87":[73,118],"131,87":[73,117],"130,86":[73,122],"131,86":[73],"130,85":[73,122],"131,85":[73],"130,84":[73,122],"131,84":[111],"130,83":[111],"131,83":[111],"132,84":[111],"133,84":[111],"132,85":[73],"133,85":[73],"132,86":[73],"133,86":[111],"132,87":[73],"133,87":[111],"132,88":[73],"133,88":[111],"132,89":[73],"133,89":[111],"132,90":[73],"133,90":[111],"132,91":[73],"133,91":[111],"132,92":[111],"133,92":[111],"134,92":[111],"134,86":[111],"135,86":[111],"134,85":[73],"135,85":[73,117],"134,84":[111],"135,84":[111],"136,84":[111],"137,84":[111],"136,85":[73,120],"137,85":[111],"137,86":[111]},"lvl-141,89":{"142,89":[73,118],"141,88":[73],"140,89":[73,85],"141,90":[111],"142,90":[111],"141,89":[73,87],"140,90":[111],"139,90":[111],"139,89":[111],"139,88":[111],"140,88":[73,118],"139,87":[111],"140,87":[111],"141,87":[73],"140,86":[111],"141,86":[111],"142,86":[111],"143,86":[111],"142,87":[73],"143,87":[73],"142,88":[73,117],"143,88":[73,117],"144,88":[73,117],"143,89":[73,118],"144,89":[73,118],"143,90":[111],"144,90":[111],"145,90":[111],"146,90":[111],"145,89":[73,118],"146,89":[73,118],"145,88":[73,117],"146,88":[73,117],"145,87":[73],"146,87":[73],"145,86":[111],"144,87":[73],"144,86":[111],"146,86":[111],"147,86":[111],"147,87":[111],"148,87":[111],"147,88":[73],"148,88":[111],"147,89":[73,120],"148,89":[111],"147,90":[111],"148,90":[111]},"lvl-119,90":{"120,90":[73],"119,89":[73,85],"118,90":[111],"119,91":[73],"120,91":[73],"119,90":[73,87],"118,91":[111],"119,92":[73],"120,92":[73],"118,92":[111],"119,93":[111],"120,93":[111],"118,93":[111],"121,93":[111],"121,92":[111],"122,92":[111],"121,91":[73,117],"122,91":[73,120],"121,90":[73,122],"122,90":[73],"121,89":[73,117],"122,89":[73],"121,88":[111],"120,89":[73],"120,88":[111],"120,87":[73],"119,88":[111],"119,87":[73,120],"118,88":[111],"118,87":[111],"118,89":[111],"118,86":[111],"119,86":[73],"118,85":[111],"119,85":[73],"118,84":[111],"119,84":[73],"118,83":[111],"119,83":[111],"120,83":[111],"121,83":[111],"120,84":[73],"121,84":[73],"120,85":[111],"121,85":[111],"120,86":[73],"121,86":[73],"122,86":[73],"121,87":[73],"122,87":[73],"123,87":[73],"122,88":[73],"123,88":[73],"124,88":[111],"123,89":[73],"124,89":[111],"123,90":[73],"124,90":[111],"123,91":[111],"124,91":[111],"123,92":[111],"124,87":[111],"124,86":[111],"124,85":[111],"123,86":[73],"123,85":[73],"123,84":[73,120],"122,85":[111],"122,84":[73],"122,83":[111],"123,83":[111],"124,83":[111],"124,84":[111]},"lvl-114,91":{"115,91":[111],"114,90":[73,120],"113,91":[73,85],"114,92":[111],"115,92":[111],"114,91":[73,87],"113,92":[111],"112,92":[111],"112,91":[111],"112,90":[111],"113,90":[111],"112,89":[73],"111,90":[111],"111,89":[73],"110,90":[111],"110,89":[111],"109,90":[111],"109,89":[111],"108,90":[73],"109,91":[111],"108,91":[73],"109,92":[111],"108,92":[111],"107,92":[111],"107,91":[73,120],"106,92":[111],"106,91":[111],"106,90":[111],"107,90":[73],"106,89":[111],"107,89":[73],"106,88":[111],"107,88":[73],"106,87":[111],"107,87":[73],"106,86":[111],"107,86":[73],"106,85":[111],"107,85":[111],"106,84":[111],"107,84":[73],"106,83":[111],"107,83":[73,120],"106,82":[111],"107,82":[111],"108,82":[111],"109,82":[111],"108,83":[73],"109,83":[73],"108,84":[73],"109,84":[73],"108,85":[111],"109,85":[111],"108,86":[73],"109,86":[73],"108,87":[111],"109,87":[111],"108,88":[73],"109,88":[73],"108,89":[73],"110,88":[73,117],"111,88":[73,117],"110,87":[73,117],"111,87":[73],"110,86":[73],"111,86":[73,117],"110,85":[73,118],"111,85":[73],"110,84":[73],"111,84":[73],"110,83":[73],"111,83":[73],"110,82":[111],"111,82":[111],"112,82":[111],"113,82":[111],"112,83":[73],"113,83":[73],"112,84":[73],"113,84":[73],"112,85":[111],"113,85":[111],"112,86":[111],"113,86":[111],"112,87":[73],"113,87":[111],"112,88":[73],"113,88":[73],"114,88":[73],"113,89":[111],"114,89":[73],"115,89":[111],"115,88":[111],"115,90":[111],"115,87":[111],"114,87":[111],"114,85":[111],"115,85":[111],"114,84":[73],"115,84":[111],"114,83":[73,120],"115,83":[111],"114,82":[111],"115,82":[111]},"lvl-140,96":{"141,96":[73,118],"140,95":[73],"139,96":[111],"140,97":[111],"141,97":[111],"140,96":[73,87],"139,97":[111],"142,97":[111],"143,97":[111],"142,96":[73,118],"143,96":[73,118],"142,95":[73,122],"143,95":[73,122],"142,94":[73,122],"141,95":[73,118],"141,94":[73,118],"141,93":[73,118],"140,94":[73],"140,93":[73,85],"139,94":[111],"139,93":[111],"139,95":[111],"139,92":[111],"140,92":[111],"141,92":[111],"142,92":[111],"143,92":[111],"142,93":[73,118],"143,93":[73,118],"144,93":[73,118],"143,94":[73,122],"144,94":[73,118],"145,94":[73,120],"144,95":[73,118],"145,95":[73,120],"144,96":[73,118],"145,96":[73,120],"144,97":[111],"145,97":[111],"146,97":[111],"146,96":[111],"146,95":[111],"146,94":[111],"146,93":[111],"146,92":[111],"145,93":[73,120],"145,92":[111],"144,92":[111]},"lvl-114,97":{"115,97":[111],"114,96":[73,120],"113,97":[73],"114,98":[111],"115,98":[111],"114,97":[73,87],"113,98":[111],"112,98":[111],"112,97":[73],"111,98":[111],"111,97":[111],"110,98":[73],"111,99":[111],"110,99":[111],"109,99":[111],"109,98":[73],"108,99":[111],"108,98":[111],"108,97":[111],"109,97":[73],"108,96":[111],"109,96":[73],"108,95":[111],"109,95":[111],"110,95":[111],"111,95":[111],"110,96":[73],"111,96":[73,85],"110,97":[73,117],"112,96":[73],"113,96":[73],"112,95":[111],"113,95":[73,118],"112,94":[111],"113,94":[111],"114,94":[111],"114,95":[111],"115,95":[111],"115,96":[111]},"lvl-136,98":{"137,98":[111],"136,97":[111],"135,98":[73],"136,99":[111],"137,99":[111],"136,98":[73,87],"135,99":[73,120],"136,100":[111],"135,100":[73],"136,101":[111],"135,101":[73,120],"136,102":[111],"135,102":[73],"136,103":[111],"135,103":[73,120],"136,104":[111],"135,104":[73,85],"136,105":[111],"135,105":[111],"134,105":[111],"134,104":[111],"134,103":[73,122],"133,104":[111],"133,103":[111],"133,102":[111],"134,102":[111],"133,101":[111],"134,101":[73,122],"133,100":[111],"134,100":[111],"133,99":[111],"134,99":[73,122],"133,98":[111],"134,98":[111],"133,97":[111],"134,97":[73,122],"133,96":[111],"134,96":[111],"135,96":[111],"136,96":[111],"135,97":[73,120],"137,97":[111]},"lvl-119,102":{"120,102":[73,120],"119,101":[73,117],"118,102":[73,118],"119,103":[111],"120,103":[111],"119,102":[73,87],"118,103":[111],"117,103":[111],"117,102":[111],"117,101":[111],"118,101":[111],"117,100":[111],"118,100":[111],"117,99":[111],"118,99":[73],"117,98":[111],"118,98":[73],"117,97":[111],"118,97":[73],"117,96":[111],"118,96":[111],"119,96":[111],"120,96":[111],"119,97":[73],
"120,97":[73,85],"119,98":[73],"120,98":[111],"119,99":[73],"120,99":[111],"119,100":[73],"120,100":[111],"121,100":[111],"120,101":[73],"121,101":[111],"121,102":[111],"121,103":[111],"121,99":[111],"121,98":[111],"121,97":[111],"121,96":[111]},"lvl-140,104":{"141,104":[73],"140,103":[73],"139,104":[111],"140,105":[111],"141,105":[111],"140,104":[73,87],"139,105":[111],"142,105":[111],"143,105":[73,120],"142,104":[73],"142,106":[111],"143,106":[111],"144,106":[111],"145,106":[111],"144,105":[73],"145,105":[73],"144,104":[111],"145,104":[73],"144,103":[73,118],"143,104":[73,118],"143,103":[73,122],"143,102":[73],"142,103":[111],"142,102":[73],"141,103":[73,117],"141,102":[73,117],"141,101":[111],"140,102":[73],"140,101":[111],"139,102":[111],"139,101":[111],"139,103":[111],"142,101":[111],"143,101":[73],"142,100":[111],"143,100":[111],"144,100":[111],"145,100":[111],"144,101":[73,120],"145,101":[111],"144,102":[73],"145,102":[111],"146,102":[111],"145,103":[73,118],"146,103":[111],"147,103":[111],"146,104":[73],"147,104":[73,120],"146,105":[111],"147,105":[73,85],"146,106":[111],"147,106":[111],"148,106":[111],"148,105":[111],"148,104":[111],"148,103":[111]},"lvl-115,107":{"116,107":[111],"115,106":[73,118],"114,107":[73],"115,108":[73],"116,108":[111],"115,107":[73,87],"114,108":[73],"115,109":[111],"116,109":[111],"114,109":[111],"113,109":[111],"113,108":[73],"112,109":[111],"112,108":[73],"111,109":[111],"111,108":[111],"111,107":[111],"112,107":[73],"111,106":[111],"112,106":[73],"111,105":[111],"112,105":[73,117],"111,104":[111],"112,104":[73,85],"111,103":[111],"112,103":[111],"113,103":[111],"114,103":[111],"113,104":[73],"114,104":[111],"113,105":[73],"114,105":[111],"113,106":[73],"114,106":[73],"113,107":[73,120],"115,105":[111],"116,105":[111],"116,106":[111]},"lvl-119,107":{"120,107":[73],"119,106":[73],"118,107":[111],"119,108":[73],"120,108":[73],"119,107":[73,87],"118,108":[111],"119,109":[73],"120,109":[111],"118,109":[111],"121,109":[111],"122,109":[111],"121,108":[73],"122,108":[73],"121,107":[73],"122,107":[111],"121,106":[73],"122,106":[73],"121,105":[111],"120,106":[73,122],"120,105":[111],"119,105":[111],"118,105":[111],"118,106":[111],"122,105":[111],"123,105":[111],"124,105":[111],"123,106":[73],"124,106":[73],"123,107":[73],"124,107":[73,85],"123,108":[73],"124,108":[73],"123,109":[111],"124,109":[111],"125,109":[111],"126,109":[111],"125,108":[73],"126,108":[111],"125,107":[73],"126,107":[111],"125,106":[73],"126,106":[73],"125,105":[111],"126,105":[111],"127,105":[111],"128,105":[111],"127,106":[73],"128,106":[73],"127,107":[73],"128,107":[73,120],"127,108":[73],"128,108":[73],"127,109":[111],"128,109":[111],"129,109":[111],"130,109":[111],"129,108":[73],"130,108":[111],"129,107":[73],"130,107":[111],"129,106":[73],"130,106":[73],"129,105":[111],"130,105":[111]},"lvl-140,113":{"141,113":[73],"140,112":[111],"139,113":[111],"140,114":[73],"141,114":[73,117],"140,113":[73,87],"139,114":[111],"140,115":[111],"141,115":[111],"139,115":[111],"142,115":[111],"143,115":[111],"142,114":[73],"143,114":[73],"142,113":[73],"143,113":[111],"142,112":[111],"143,112":[111],"142,111":[73],"141,112":[111],"141,111":[73],"141,110":[73,117],"140,111":[73],"140,110":[73],"139,111":[111],"139,110":[111],"139,112":[111],"139,109":[111],"140,109":[111],"141,109":[111],"142,109":[111],"143,109":[73,85],"142,108":[111],"142,110":[73],"143,110":[73],"144,110":[73],"143,111":[111],"144,111":[73,120],"145,111":[73],"144,112":[111],"145,112":[73,122],"144,113":[111],"145,113":[73,118],"144,114":[73],"145,114":[73],"144,115":[111],"145,115":[111],"146,115":[111],"147,115":[111],"146,114":[73],"147,114":[73],"146,113":[111],"147,113":[111],"146,112":[111],"147,112":[73],"146,111":[111],"147,111":[73],"146,110":[73],"147,110":[73],"146,109":[73],"145,110":[73],"145,109":[111],"145,108":[111],"144,109":[111],"144,108":[111],"143,108":[111],"146,108":[111],"147,108":[111],"148,108":[111],"147,109":[73],"148,109":[111],"149,109":[111],"148,110":[73,120],"149,110":[111],"148,111":[73],"149,111":[111],"148,112":[73],"149,112":[111],"148,113":[73,120],"149,113":[111],"148,114":[73],"149,114":[111],"148,115":[111],"149,115":[111]},"lvl-115,116":{"116,116":[111],"115,115":[73],"114,116":[111],"115,117":[73],"116,117":[111],"115,116":[73,87],"114,117":[73],"115,118":[111],"116,118":[111],"114,118":[111],"113,118":[111],"113,117":[73,120],"112,118":[111],"112,117":[73],"111,118":[111],"111,117":[73,120],"110,118":[111],"110,117":[111],"110,116":[111],"111,116":[73],"110,115":[111],"111,115":[73],"110,114":[111],"111,114":[73],"110,113":[111],"111,113":[73,85],"110,112":[111],"111,112":[111],"112,112":[111],"113,112":[111],"112,113":[73],"113,113":[73,117],"112,114":[73],"113,114":[73],"112,115":[73],"113,115":[73],"112,116":[73],"113,116":[73],"114,115":[111],"114,114":[111],"115,114":[73],"114,113":[111],"115,113":[73,118],"114,112":[111],"115,112":[111],"116,112":[111],"117,112":[111],"116,113":[73],"117,113":[111],"116,114":[73,117],"117,114":[111],"116,115":[111],"117,115":[111]},"lvl-140,120":{"141,120":[73,118],"140,119":[111],"139,120":[111],"140,121":[111],"141,121":[111],"140,120":[73,87],"139,121":[111],"142,121":[111],"143,121":[111],"142,120":[73],"143,120":[73],"142,119":[73],"143,119":[73],"142,118":[73],"141,119":[73],"141,118":[73,120],"141,117":[111],"140,118":[111],"140,117":[111],"142,117":[111],"143,117":[111],"144,117":[111],"143,118":[73],"144,118":[73],"145,118":[73,85],"144,119":[73],"145,119":[73],"144,120":[73],"145,120":[73],"144,121":[111],"145,121":[111],"146,121":[111],"147,121":[111],"146,120":[73,122],"147,120":[111],"146,119":[111],"147,119":[111],"146,118":[111],"146,117":[111],"145,117":[111],"139,119":[111]},"lvl-119,121":{"120,121":[111],"119,120":[111],"118,121":[111],"119,122":[73,118],"120,122":[73],"119,121":[73,87],"118,122":[111],"119,123":[111],"120,123":[111],"118,123":[111],"121,123":[111],"122,123":[111],"121,122":[73],"122,122":[73],"121,121":[73,85],"122,121":[73],"121,120":[111],"122,120":[111],"121,119":[73,117],"120,120":[111],"120,119":[73],"120,118":[73],"119,119":[111],"119,118":[111],"119,117":[111],"120,117":[73],"119,116":[111],"120,116":[73],"119,115":[111],"120,115":[73],"119,114":[111],"120,114":[73],"119,113":[111],"120,113":[73],"119,112":[111],"120,112":[73],"119,111":[111],"120,111":[111],"121,111":[111],"122,111":[111],"121,112":[73],"122,112":[73],"121,113":[73],"122,113":[73],"121,114":[73],"122,114":[111],"121,115":[73],"122,115":[111],"121,116":[73],"122,116":[111],"121,117":[73],"122,117":[111],"121,118":[73],"122,118":[111],"123,118":[73],"122,119":[111],"123,119":[73],"124,119":[73],"123,120":[73],"124,120":[73],"123,121":[73],"124,121":[73],"123,122":[73],"124,122":[73],"123,123":[111],"124,123":[111],"125,123":[111],"125,122":[111],"125,121":[111],"125,120":[111],"125,119":[111],"126,119":[111],"125,118":[111],"126,118":[111],"125,117":[111],"124,118":[73],"124,117":[73],"124,116":[73],"123,117":[73],"123,116":[73],"123,115":[73],"124,115":[73],"123,114":[111],"124,114":[111],"123,113":[73],"124,113":[73],"123,112":[73],"124,112":[73],"123,111":[111],"124,111":[111],"125,111":[111],"126,111":[111],"125,112":[73],"126,112":[73],"125,113":[73],"126,113":[73],"125,114":[111],"126,114":[111],"125,115":[73],"126,115":[73],"125,116":[73],"126,116":[73],"127,116":[73],"126,117":[111],"127,117":[73],"128,117":[73],"127,118":[73],"128,118":[73],"127,119":[111],"128,119":[111],"129,119":[111],"130,119":[111],"129,118":[73],"130,118":[73],"129,117":[73],"130,117":[73],"129,116":[111],"130,116":[73],"129,115":[111],"128,116":[73],"128,115":[73,120],"128,114":[111],"127,115":[73],"127,114":[111],"127,113":[73],"128,113":[73],"127,112":[73],"128,112":[73],"127,111":[111],"128,111":[111],"129,111":[111],"130,111":[111],"129,112":[73],"130,112":[73],"129,113":[73],"130,113":[73],"129,114":[111],"130,114":[73],"131,114":[73],"130,115":[73],"131,115":[73],"132,115":[111],"131,116":[73],"132,116":[111],"131,117":[73],"132,117":[111],"131,118":[73],"132,118":[111],"131,119":[111],"132,119":[111],"132,114":[111],"132,113":[111],"132,112":[111],"131,113":[73],"131,112":[73],"131,111":[111],"132,111":[111],"118,120":[111]},"lvl-115,124":{"116,124":[111],"115,123":[111],"114,124":[73,118],"115,125":[111],"116,125":[111],"115,124":[73,87],"114,125":[73],"115,126":[111],"114,126":[73],"115,127":[111],"114,127":[111],"113,127":[111],"113,126":[73],"112,127":[111],"112,126":[73],"111,127":[111],"111,126":[73],"110,127":[111],"110,126":[111],"110,125":[111],"111,125":[73],"110,124":[111],"111,124":[73],"110,123":[111],"111,123":[73,117],"110,122":[111],"111,122":[73,85],"110,121":[111],"111,121":[111],"112,121":[111],"113,121":[111],"112,122":[73],"113,122":[73],"112,123":[73],"113,123":[73],"112,124":[73],"113,124":[73],"112,125":[73,120],"113,125":[73],"114,123":[111],"114,122":[111],"114,121":[111],"116,123":[111]},"lvl-128,126":{"129,126":[73],"128,125":[111],"127,126":[111],"128,127":[111],"129,127":[111],"128,126":[73,87],"127,127":[111],"130,127":[111],"131,127":[111],"130,126":[73,118],"131,126":[111],"130,125":[73],"131,125":[111],"130,124":[73],"129,125":[111],"129,124":[73],"129,123":[73],"128,124":[73],"128,123":[73],"127,124":[111],"127,123":[111],"127,125":[111],"127,122":[111],"128,122":[73,85],"127,121":[111],"128,121":[111],"129,121":[111],"130,121":[111],"129,122":[73],"130,122":[73],"131,122":[111],"130,123":[73],"131,123":[111],"131,124":[111],"131,121":[111]},"lvl-140,128":{"141,128":[73],"140,127":[111],"139,128":[111],"140,129":[111],"141,129":[111],"140,128":[73,87],"139,129":[111],"142,129":[111],"143,129":[111],"142,128":[73],"143,128":[73],"142,127":[73,118],"143,127":[73],"142,126":[73,118],"141,127":[111],"141,126":[111],"141,125":[111],"142,125":[73],"141,124":[73],"140,125":[111],"140,124":[73,85],"139,125":[111],"139,124":[111],"139,123":[111],"140,123":[111],"141,123":[111],"142,123":[111],"143,123":[111],"142,124":[73],"143,124":[73],"144,124":[73],"143,125":[73],"144,125":[73],"143,126":[111],"144,126":[111],"145,126":[111],"144,127":[73,117],"145,127":[73],"144,128":[73],"145,128":[73],"144,129":[111],"145,129":[111],"146,129":[111],"146,128":[111],"146,127":[111],"146,126":[111],"146,125":[111],"146,124":[111],"145,125":[73,120],"145,124":[73],"145,123":[111],"146,123":[111],"144,123":[111],"139,127":[111]},"lvl-120,129":{"121,129":[111],"120,128":[111],"119,129":[111],"120,130":[73,118],"121,130":[111],"120,129":[73,87],"119,130":[111],"120,131":[73],"121,131":[111],"119,131":[111],"120,132":[73],"121,132":[111],"119,132":[111],"120,133":[73,117],"121,133":[73],"119,133":[111],"120,134":[111],"121,134":[111],"119,134":[111],"122,134":[111],"123,134":[111],"122,133":[73],"123,133":[73,120],"122,132":[111],"123,132":[73],"122,131":[111],"123,131":[73],"122,130":[111],"123,130":[73,85],"122,129":[111],"123,129":[111],"124,129":[111],"124,130":[111],"124,131":[111],"124,132":[111],"124,133":[111],"124,134":[111],"119,128":[111],"121,128":[111]},"lvl-135,131":{"136,131":[73,94],"135,130":[111],"134,131":[73,94],"135,132":[111,94],"136,132":[73,94,117],"135,131":[73,87,94],"134,132":[73,94,120],"135,133":[111,94],"136,133":[73,94],"134,133":[73,94],"135,134":[111,94],"136,134":[73,94],"134,134":[111,94],"135,135":[73,94],"136,135":[73,94],"134,135":[73,94],"135,136":[73,94],"136,136":[73,94],"134,136":[111,94],"135,137":[111,94],"136,137":[111,94],"134,137":[111,94],"135,138":[73,94],"136,138":[73,94,85],"134,138":[73,94],"135,139":[111],"136,139":[111],"134,139":[111],"133,139":[111],"133,138":[73,94],"132,139":[111],"132,138":[73,94],"131,139":[111],"131,138":[111,94],"130,139":[111],"130,138":[111,94],"129,139":[111],"129,138":[111],"129,137":[111],"130,137":[111,94],"129,136":[111],"130,136":[111,94],"129,135":[111],"130,135":[73,94],"129,134":[111],"130,134":[73,94],"129,133":[111],"130,133":[73,94],"129,132":[111],"130,132":[73,94],"129,131":[111],"130,131":[73,94,118],"129,130":[111],"130,130":[111],"131,130":[111],"132,130":[111],"131,131":[111,94],"132,131":[111,94],"131,132":[111,94],"132,132":[111,94],"131,133":[73,94],"132,133":[73,94,117],"131,134":[111,94],"132,134":[111,94],"131,135":[73,94],"132,135":[73,94],"131,136":[111,94],"132,136":[73,94,120],"131,137":[111,94],"132,137":[73,94],"133,137":[111,94],"133,136":[111,94],"133,135":[73,94],"133,134":[111,94],"133,133":[73,94],"133,132":[111,94],"133,131":[111,94],"133,130":[111],"134,130":[111],"137,139":[111],"137,138":[111],"137,137":[111],"137,136":[111],"137,135":[111],"137,134":[111],"137,133":[111],"137,132":[111],"137,131":[111],"137,130":[111],"136,130":[111]}},F={width:256,height:256},X={61:"exit",63:"ice",64:"lava",73:"normal",82:"portal_solved",83:"portal_unexplored",84:"portal_unsolved",85:"puzzle_end",86:"puzzle_end_done",87:"puzzle_start",88:"sign_blocks",89:"sign_colors",90:"sign_mirrors",91:"sign_sliding",92:"switch",94:"water",95:"normal_advanced",96:"normal_cloning",97:"normal_blocks",98:"normal_colors",111:"wall",112:"sign_cloning",113:"controls",114:"button_goal",115:"parking",117:"package",118:"vehicle",119:"pollution",120:"destination_unsolved",121:"destination_solved",122:"vehicle_with_package",123:"vehicle_player_with_package",124:"vehicle_player",125:"sign_transport",126:"sign_danger"},V={wall:"111",sign_cloning:"112",controls:"113",button_goal:"114",parking:"115",package:"117",vehicle:"118",pollution:"119",destination_unsolved:"120",destination_solved:"121",vehicle_with_package:"122",vehicle_player_with_package:"123",vehicle_player:"124",sign_transport:"125",sign_danger:"126",exit:"61",ice:"63",lava:"64",normal:"73",portal_solved:"82",portal_unexplored:"83",portal_unsolved:"84",puzzle_end:"85",puzzle_end_done:"86",puzzle_start:"87",sign_blocks:"88",sign_colors:"89",sign_mirrors:"90",sign_sliding:"91",switch:"92",water:"94",normal_advanced:"95",normal_cloning:"96",normal_blocks:"97",normal_colors:"98"},q={layers:R,tileSize:F,idToName:X,nameToId:V};E.system([],function(){function t(){c(this,t)}return h(t,[{key:"init",value:function(){A.setData(q),N.send("loadTiles",{layer:"world"})}},{key:"pre",value:function(){N.clear("loaded"),N.process("loadTiles",function(t){A.loadTiles(t),N.send("loaded",t)})}}]),t}());var K=o(function(t){!function(e,n,i){function o(t,e,n){return t.addEventListener?void t.addEventListener(e,n,!1):void t.attachEvent("on"+e,n)}function r(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return g[t.which]?g[t.which]:k[t.which]?k[t.which]:String.fromCharCode(t.which).toLowerCase()}function s(t,e){return t.sort().join(",")===e.sort().join(",")}function a(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}function u(t){return t.preventDefault?void t.preventDefault():void(t.returnValue=!1)}function l(t){return t.stopPropagation?void t.stopPropagation():void(t.cancelBubble=!0)}function c(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function h(){if(!m){m={};for(var t in g)t>95&&t<112||g.hasOwnProperty(t)&&(m[g[t]]=t)}return m}function p(t,e,n){return n||(n=h()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function f(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus"),t.split("+"))}function v(t,e){var n,i,o,r=[];for(n=f(t),o=0;o<n.length;++o)i=n[o],x[i]&&(i=x[i]),e&&"keypress"!=e&&w[i]&&(i=w[i],r.push("shift")),c(i)&&r.push(i);return e=p(i,r,e),{key:i,modifiers:r,action:e}}function d(t,e){return null!==t&&t!==n&&(t===e||d(t.parentNode,e))}function y(t){function e(t){t=t||{};var e,n=!1;for(e in w)t[e]?n=!0:w[e]=0;n||(b=!1)}function i(t,e,n,i,o,r){var a,u,l=[],h=n.type;if(!g._callbacks[t])return[];for("keyup"==h&&c(t)&&(e=[t]),a=0;a<g._callbacks[t].length;++a)if(u=g._callbacks[t][a],(i||!u.seq||w[u.seq]==u.level)&&h==u.action&&("keypress"==h&&!n.metaKey&&!n.ctrlKey||s(e,u.modifiers))){var p=!i&&u.combo==o,f=i&&u.seq==i&&u.level==r;(p||f)&&g._callbacks[t].splice(a,1),l.push(u)}return l}function h(t,e,n,i){g.stopCallback(e,e.target||e.srcElement,n,i)||t(e,n)===!1&&(u(e),l(e))}function p(t){"number"!=typeof t.which&&(t.which=t.keyCode);var e=r(t);if(e)return"keyup"==t.type&&x===e?void(x=!1):void g.handleKey(e,a(t),t)}function f(){clearTimeout(k),k=setTimeout(e,1e3)}function d(t,n,i,o){function s(e){return function(){b=e,++w[t],f()}}function a(n){h(i,n,t),"keyup"!==o&&(x=r(n)),setTimeout(e,10)}w[t]=0;for(var u=0;u<n.length;++u){var l=u+1===n.length,c=l?a:s(o||v(n[u+1]).action);m(n[u],c,o,t,u)}}function m(t,e,n,o,r){g._directMap[t+":"+n]=e,t=t.replace(/\s+/g," ");var s,a=t.split(" ");return a.length>1?void d(t,a,e,n):(s=v(t,n),g._callbacks[s.key]=g._callbacks[s.key]||[],i(s.key,s.modifiers,{type:s.action},o,t,r),void g._callbacks[s.key][o?"unshift":"push"]({callback:e,modifiers:s.modifiers,action:s.action,seq:o,level:r,combo:t}))}var g=this;if(t=t||n,!(g instanceof y))return new y(t);g.target=t,g._callbacks={},g._directMap={};var k,w={},x=!1,z=!1,b=!1;g._handleKey=function(t,n,o){var r,s=i(t,n,o),a={},u=0,l=!1;for(r=0;r<s.length;++r)s[r].seq&&(u=Math.max(u,s[r].level));for(r=0;r<s.length;++r)if(s[r].seq){if(s[r].level!=u)continue;l=!0,a[s[r].seq]=1,h(s[r].callback,o,s[r].combo,s[r].seq)}else l||h(s[r].callback,o,s[r].combo);var p="keypress"==o.type&&z;o.type!=b||c(t)||p||e(a),z=l&&"keydown"==o.type},g._bindMultiple=function(t,e,n){for(var i=0;i<t.length;++i)m(t[i],e,n)},o(t,"keypress",p),o(t,"keydown",p),o(t,"keyup",p)}if(e){for(var m,g={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},k={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},w={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},x={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},z=1;z<20;++z)g[111+z]="f"+z;for(z=0;z<=9;++z)g[z+96]=z;y.prototype.bind=function(t,e,n){var i=this;return t=t instanceof Array?t:[t],i._bindMultiple.call(i,t,e,n),i},y.prototype.unbind=function(t,e){var n=this;return n.bind.call(n,t,function(){},e)},y.prototype.trigger=function(t,e){var n=this;return n._directMap[t+":"+e]&&n._directMap[t+":"+e]({},t),n},y.prototype.reset=function(){var t=this;return t._callbacks={},t._directMap={},t},y.prototype.stopCallback=function(t,e){var n=this;return!((" "+e.className+" ").indexOf(" mousetrap ")>-1)&&(!d(e,n.target)&&("INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable))},y.prototype.handleKey=function(){var t=this;return t._handleKey.apply(t,arguments)},y.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(g[e]=t[e]);m=null},y.init=function(){var t=y(n);for(var e in t)"_"!==e.charAt(0)&&(y[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},y.init(),e.Mousetrap=y,t.exports&&(t.exports=y),"function"==typeof i&&i.amd&&i(function(){return y})}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)}),U=o(function(t){!function(e,n,i,o){function r(t,e,n){return setTimeout(h(t,n),e)}function s(t,e,n){return!!Array.isArray(t)&&(a(t,n[e],n),!0)}function a(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==o)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function u(t,n,i){var o="DEPRECATED METHOD: "+n+"\n"+i+" AT \n";return function(){var n=new Error("get-stack-trace"),i=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=e.console&&(e.console.warn||e.console.log);return r&&r.call(e.console,o,i),t.apply(this,arguments)}}function c(t,e,n){var i,o=e.prototype;i=t.prototype=Object.create(o),i.constructor=t,i._super=o,n&&ft(i,n)}function h(t,e){return function(){return t.apply(e,arguments)}}function p(t,e){return("undefined"==typeof t?"undefined":l(t))==yt?t.apply(e?e[0]||o:o,e):t}function f(t,e){return t===o?e:t}function v(t,e,n){a(g(e),function(e){t.addEventListener(e,n,!1)})}function d(t,e,n){a(g(e),function(e){t.removeEventListener(e,n,!1)})}function y(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function m(t,e){return t.indexOf(e)>-1}function g(t){return t.trim().split(/\s+/g)}function k(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function w(t){return Array.prototype.slice.call(t,0)}function x(t,e,n){for(var i=[],o=[],r=0;r<t.length;){var s=e?t[r][e]:t[r];k(o,s)<0&&i.push(t[r]),o[r]=s,r++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function z(t,e){for(var n,i,r=e[0].toUpperCase()+e.slice(1),s=0;s<vt.length;){if(n=vt[s],i=n?n+r:e,i in t)return i;s++}return o}function b(){return zt++}function T(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}function E(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){p(t.options.enable,[t])&&n.handler(e)},this.init()}function P(t){var e,n=t.options.inputClass;return new(e=n?n:Et?V:Pt?U:Tt?W:X)(t,_)}function _(t,e,n){var i=n.pointers.length,o=n.changedPointers.length,r=e&Ct&&i-o===0,s=e&(Ot|Nt)&&i-o===0;n.isFirst=!!r,n.isFinal=!!s,r&&(t.session={}),n.eventType=e,I(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function I(t,e){var n=t.session,i=e.pointers,o=i.length;n.firstInput||(n.firstInput=D(e)),o>1&&!n.firstMultiple?n.firstMultiple=D(e):1===o&&(n.firstMultiple=!1);var r=n.firstInput,s=n.firstMultiple,a=s?s.center:r.center,u=e.center=C(i);e.timeStamp=kt(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=L(a,u),e.distance=N(a,u),S(n,e),e.offsetDirection=O(e.deltaX,e.deltaY);var l=A(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=gt(l.x)>gt(l.y)?l.x:l.y,e.scale=s?F(s.pointers,i):1,e.rotation=s?R(s.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,M(n,e);var c=t.element;y(e.srcEvent.target,c)&&(c=e.srcEvent.target),e.target=c}function S(t,e){var n=e.center,i=t.offsetDelta||{},o=t.prevDelta||{},r=t.prevInput||{};e.eventType!==Ct&&r.eventType!==Ot||(o=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=o.x+(n.x-i.x),e.deltaY=o.y+(n.y-i.y)}function M(t,e){var n,i,r,s,a=t.lastInterval||e,u=e.timeStamp-a.timeStamp;if(e.eventType!=Nt&&(u>Dt||a.velocity===o)){var l=e.deltaX-a.deltaX,c=e.deltaY-a.deltaY,h=A(u,l,c);i=h.x,r=h.y,n=gt(h.x)>gt(h.y)?h.x:h.y,s=O(l,c),t.lastInterval=e}else n=a.velocity,i=a.velocityX,r=a.velocityY,s=a.direction;e.velocity=n,e.velocityX=i,e.velocityY=r,e.direction=s}function D(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:mt(t.pointers[n].clientX),clientY:mt(t.pointers[n].clientY)},n++;return{timeStamp:kt(),pointers:e,center:C(e),deltaX:t.deltaX,deltaY:t.deltaY}}function C(t){var e=t.length;if(1===e)return{x:mt(t[0].clientX),y:mt(t[0].clientY)};for(var n=0,i=0,o=0;o<e;)n+=t[o].clientX,i+=t[o].clientY,o++;return{x:mt(n/e),y:mt(i/e)}}function A(t,e,n){return{x:e/t||0,y:n/t||0}}function O(t,e){return t===e?Lt:gt(t)>=gt(e)?t<0?Rt:Ft:e<0?Xt:Vt}function N(t,e,n){n||(n=Yt);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return Math.sqrt(i*i+o*o)}function L(t,e,n){n||(n=Yt);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return 180*Math.atan2(o,i)/Math.PI}function R(t,e){return L(e[1],e[0],Wt)+L(t[1],t[0],Wt)}function F(t,e){return N(e[0],e[1],Wt)/N(t[0],t[1],Wt)}function X(){this.evEl=jt,this.evWin=Bt,this.pressed=!1,E.apply(this,arguments)}function V(){this.evEl=Zt,this.evWin=Qt,E.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function q(){this.evTarget=te,this.evWin=ee,this.started=!1,E.apply(this,arguments)}function K(t,e){var n=w(t.touches),i=w(t.changedTouches);return e&(Ot|Nt)&&(n=x(n.concat(i),"identifier",!0)),[n,i]}function U(){this.evTarget=ie,this.targetIds={},E.apply(this,arguments)}function Y(t,e){var n=w(t.touches),i=this.targetIds;if(e&(Ct|At)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var o,r,s=w(t.changedTouches),a=[],u=this.target;if(r=n.filter(function(t){return y(t.target,u)}),e===Ct)for(o=0;o<r.length;)i[r[o].identifier]=!0,o++;for(o=0;o<s.length;)i[s[o].identifier]&&a.push(s[o]),e&(Ot|Nt)&&delete i[s[o].identifier],o++;return a.length?[x(r.concat(a),"identifier",!0),a]:void 0}function W(){E.apply(this,arguments);var t=h(this.handler,this);this.touch=new U(this.manager,t),this.mouse=new X(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function H(t,e){t&Ct?(this.primaryTouch=e.changedPointers[0].identifier,j.call(this,e)):t&(Ot|Nt)&&j.call(this,e)}function j(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches,o=function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)};setTimeout(o,oe)}}function B(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var o=this.lastTouches[i],r=Math.abs(e-o.x),s=Math.abs(n-o.y);if(r<=re&&s<=re)return!0}return!1}function G(t,e){this.manager=t,this.set(e)}function J(t){if(m(t,he))return he;var e=m(t,pe),n=m(t,fe);return e&&n?he:e||n?e?pe:fe:m(t,ce)?ce:le}function Z(){if(!ae)return!1;var t={},n=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){t[i]=!n||e.CSS.supports("touch-action",i)}),t}function Q(t){this.options=ft({},this.defaults,t||{}),this.id=b(),this.manager=null,this.options.enable=f(this.options.enable,!0),this.state=de,this.simultaneous={},this.requireFail=[]}function $(t){return t&we?"cancel":t&ge?"end":t&me?"move":t&ye?"start":""}function tt(t){return t==Vt?"down":t==Xt?"up":t==Rt?"left":t==Ft?"right":""}function et(t,e){var n=e.manager;return n?n.get(t):t}function nt(){Q.apply(this,arguments)}function it(){nt.apply(this,arguments),this.pX=null,this.pY=null}function ot(){nt.apply(this,arguments)}function rt(){Q.apply(this,arguments),this._timer=null,this._input=null}function st(){nt.apply(this,arguments)}function at(){nt.apply(this,arguments)}function ut(){Q.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function lt(t,e){return e=e||{},e.recognizers=f(e.recognizers,lt.defaults.preset),new ct(t,e)}function ct(t,e){this.options=ft({},lt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=P(this),this.touchAction=new G(this,this.options.touchAction),ht(this,!0),a(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ht(t,e){var n=t.element;if(n.style){var i;a(t.options.cssProps,function(o,r){i=z(n.style,r),e?(t.oldCssProps[i]=n.style[i],n.style[i]=o):n.style[i]=t.oldCssProps[i]||""}),e||(t.oldCssProps={})}}function pt(t,e){var i=n.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}var ft,vt=["","webkit","Moz","MS","ms","o"],dt=n.createElement("div"),yt="function",mt=Math.round,gt=Math.abs,kt=Date.now;ft="function"!=typeof Object.assign?function(t){if(t===o||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==o&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}:Object.assign;var wt=u(function(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;)(!n||n&&t[i[r]]===o)&&(t[i[r]]=e[i[r]]),r++;return t},"extend","Use `assign`."),xt=u(function(t,e){return wt(t,e,!0)},"merge","Use `assign`."),zt=1,bt=/mobile|tablet|ip(ad|hone|od)|android/i,Tt="ontouchstart"in e,Et=z(e,"PointerEvent")!==o,Pt=Tt&&bt.test(navigator.userAgent),_t="touch",It="pen",St="mouse",Mt="kinect",Dt=25,Ct=1,At=2,Ot=4,Nt=8,Lt=1,Rt=2,Ft=4,Xt=8,Vt=16,qt=Rt|Ft,Kt=Xt|Vt,Ut=qt|Kt,Yt=["x","y"],Wt=["clientX","clientY"];E.prototype={handler:function(){},init:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(T(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(T(this.element),this.evWin,this.domHandler)}};var Ht={mousedown:Ct,mousemove:At,mouseup:Ot},jt="mousedown",Bt="mousemove mouseup";c(X,E,{handler:function(t){var e=Ht[t.type];e&Ct&&0===t.button&&(this.pressed=!0),e&At&&1!==t.which&&(e=Ot),this.pressed&&(e&Ot&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:St,srcEvent:t}))}});var Gt={pointerdown:Ct,pointermove:At,pointerup:Ot,pointercancel:Nt,pointerout:Nt},Jt={2:_t,3:It,4:St,5:Mt},Zt="pointerdown",Qt="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Zt="MSPointerDown",Qt="MSPointerMove MSPointerUp MSPointerCancel"),c(V,E,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),o=Gt[i],r=Jt[t.pointerType]||t.pointerType,s=r==_t,a=k(e,t.pointerId,"pointerId");o&Ct&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):o&(Ot|Nt)&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),n&&e.splice(a,1))}});var $t={touchstart:Ct,touchmove:At,touchend:Ot,touchcancel:Nt},te="touchstart",ee="touchstart touchmove touchend touchcancel";c(q,E,{handler:function(t){var e=$t[t.type];if(e===Ct&&(this.started=!0),this.started){var n=K.call(this,t,e);e&(Ot|Nt)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:_t,srcEvent:t})}}});var ne={touchstart:Ct,touchmove:At,touchend:Ot,touchcancel:Nt},ie="touchstart touchmove touchend touchcancel";c(U,E,{handler:function(t){var e=ne[t.type],n=Y.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:_t,srcEvent:t})}});var oe=2500,re=25;c(W,E,{handler:function(t,e,n){var i=n.pointerType==_t,o=n.pointerType==St;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)H.call(this,e,n);else if(o&&B.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var se=z(dt.style,"touchAction"),ae=se!==o,ue="compute",le="auto",ce="manipulation",he="none",pe="pan-x",fe="pan-y",ve=Z();G.prototype={set:function(t){t==ue&&(t=this.compute()),ae&&this.manager.element.style&&ve[t]&&(this.manager.element.style[se]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return a(this.manager.recognizers,function(e){p(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),J(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var i=this.actions,o=m(i,he)&&!ve[he],r=m(i,fe)&&!ve[fe],s=m(i,pe)&&!ve[pe];if(o){var a=1===t.pointers.length,u=t.distance<2,l=t.deltaTime<250;if(a&&u&&l)return}return s&&r?void 0:o||r&&n&qt||s&&n&Kt?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var de=1,ye=2,me=4,ge=8,ke=ge,we=16,xe=32;Q.prototype={defaults:{},set:function(t){return ft(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(s(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=et(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return s(t,"dropRecognizeWith",this)?this:(t=et(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){
if(s(t,"requireFailure",this))return this;var e=this.requireFail;return t=et(t,this),k(e,t)===-1&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(s(t,"dropRequireFailure",this))return this;t=et(t,this);var e=k(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function t(e){function t(t){n.manager.emit(t,e)}var n=this,i=this.state;i<ge&&t(n.options.event+$(i)),t(n.options.event),e.additionalEvent&&t(e.additionalEvent),i>=ge&&t(n.options.event+$(i))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=xe)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(xe|de)))return!1;t++}return!0},recognize:function(t){var e=ft({},t);return p(this.options.enable,[this,e])?(this.state&(ke|we|xe)&&(this.state=de),this.state=this.process(e),void(this.state&(ye|me|ge|we)&&this.tryEmit(e))):(this.reset(),void(this.state=xe))},process:function(t){},getTouchAction:function(){},reset:function(){}},c(nt,Q,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(ye|me),o=this.attrTest(t);return i&&(n&Nt||!o)?e|we:i||o?n&Ot?e|ge:e&ye?e|me:ye:xe}}),c(it,nt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ut},getTouchAction:function(){var t=this.options.direction,e=[];return t&qt&&e.push(fe),t&Kt&&e.push(pe),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,o=t.direction,r=t.deltaX,s=t.deltaY;return o&e.direction||(e.direction&qt?(o=0===r?Lt:r<0?Rt:Ft,n=r!=this.pX,i=Math.abs(t.deltaX)):(o=0===s?Lt:s<0?Xt:Vt,n=s!=this.pY,i=Math.abs(t.deltaY))),t.direction=o,n&&i>e.threshold&&o&e.direction},attrTest:function(t){return nt.prototype.attrTest.call(this,t)&&(this.state&ye||!(this.state&ye)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=tt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),c(ot,nt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[he]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&ye)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),c(rt,Q,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[le]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(Ot|Nt)&&!o)this.reset();else if(t.eventType&Ct)this.reset(),this._timer=r(function(){this.state=ke,this.tryEmit()},e.time,this);else if(t.eventType&Ot)return ke;return xe},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===ke&&(t&&t.eventType&Ot?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=kt(),this.manager.emit(this.options.event,this._input)))}}),c(st,nt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[he]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&ye)}}),c(at,nt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:qt|Kt,pointers:1},getTouchAction:function(){return it.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(qt|Kt)?e=t.overallVelocity:n&qt?e=t.overallVelocityX:n&Kt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&gt(e)>this.options.velocity&&t.eventType&Ot},emit:function(t){var e=tt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),c(ut,Q,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ce]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&Ct&&0===this.count)return this.failTimeout();if(i&&o&&n){if(t.eventType!=Ot)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||N(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&s?this.count+=1:this.count=1,this._input=t;var u=this.count%e.taps;if(0===u)return this.hasRequireFailures()?(this._timer=r(function(){this.state=ke,this.tryEmit()},e.interval,this),ye):ke}return xe},failTimeout:function(){return this._timer=r(function(){this.state=xe},this.options.interval,this),xe},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ke&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),lt.VERSION="2.0.7",lt.defaults={domEvents:!1,touchAction:ue,enable:!0,inputTarget:null,inputClass:null,preset:[[st,{enable:!1}],[ot,{enable:!1},["rotate"]],[at,{direction:qt}],[it,{direction:qt},["swipe"]],[ut],[ut,{event:"doubletap",taps:2},["tap"]],[rt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ze=1,be=2;ct.prototype={set:function(t){return ft(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?be:ze},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,i=this.recognizers,o=e.curRecognizer;(!o||o&&o.state&ke)&&(o=e.curRecognizer=null);for(var r=0;r<i.length;)n=i[r],e.stopped===be||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(t),!o&&n.state&(ye|me|ge)&&(o=e.curRecognizer=n),r++}},get:function(t){if(t instanceof Q)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(s(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(s(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=k(e,t);n!==-1&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==o&&e!==o){var n=this.handlers;return a(g(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==o){var n=this.handlers;return a(g(t),function(t){e?n[t]&&n[t].splice(k(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&pt(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&ht(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ft(lt,{INPUT_START:Ct,INPUT_MOVE:At,INPUT_END:Ot,INPUT_CANCEL:Nt,STATE_POSSIBLE:de,STATE_BEGAN:ye,STATE_CHANGED:me,STATE_ENDED:ge,STATE_RECOGNIZED:ke,STATE_CANCELLED:we,STATE_FAILED:xe,DIRECTION_NONE:Lt,DIRECTION_LEFT:Rt,DIRECTION_RIGHT:Ft,DIRECTION_UP:Xt,DIRECTION_DOWN:Vt,DIRECTION_HORIZONTAL:qt,DIRECTION_VERTICAL:Kt,DIRECTION_ALL:Ut,Manager:ct,Input:E,TouchAction:G,TouchInput:U,MouseInput:X,PointerEventInput:V,TouchMouseInput:W,SingleTouchInput:q,Recognizer:Q,AttrRecognizer:nt,Tap:ut,Pan:it,Swipe:at,Pinch:ot,Rotate:st,Press:rt,on:v,off:d,each:a,merge:xt,extend:wt,assign:ft,inherit:c,bindFn:h,prefixed:z});var Te="undefined"!=typeof e?e:"undefined"!=typeof self?self:{};Te.Hammer=lt,"function"==typeof o&&o.amd?o(function(){return lt}):t.exports?t.exports=lt:e[i]=lt}(window,document,"Hammer")}),Y=new U.Manager(document.body,{recognizers:[[U.Tap],[U.Pan,{direction:U.DIRECTION_ALL}]]});E.system([],function(){function t(){c(this,t),K.bind("esc",function(){N.send("exitLevel")}),K.bind("r",function(){N.send("restart")}),Y.on("tap",function(t){t.center.x<64&&t.center.y<64&&N.send("exitLevel")})}return t}()),E.system([],function(){function t(){var e=this;c(this,t),this.keysDown={i:!1,o:!1},K.bind("u",function(){e.setScale(.25)}),K.bind("i",function(){e.keysDown.i=!0}),K.bind("i",function(){e.keysDown.i=!1},"keyup"),K.bind("o",function(){e.keysDown.o=!0}),K.bind("o",function(){e.keysDown.o=!1},"keyup")}return h(t,[{key:"init",value:function(){this.setScale(.25)}},{key:"pre",value:function(){this.keysDown.i&&this.setScale(this.getScale()*(1+1*P.val)),this.keysDown.o&&this.setScale(this.getScale()*(1-1*P.val))}},{key:"setScale",value:function(t){I.scale.x=t,I.scale.y=t,N.send("updateCamera")}},{key:"getScale",value:function(){return I.scale.x}}]),t}()),E.system(["inputMovement"],function(){function t(){c(this,t),this.moveDelta={x:0,y:0},this.lastMoveDelta={x:0,y:0},this.keys={},this.touching=!1,this.timer=0,this.movementSpeed=.2,this.initKeyboardInput(),this.initTouchInput()}return h(t,[{key:"pre",value:function(){var t=this;if(N.process("resetKeys",function(){t.resetKeys()}),!this.touching){this.moveDelta={x:0,y:0};for(var e in this.keys){var n=this.keys[e];n.down&&(this.moveDelta.x=n.delta.x,this.moveDelta.y=n.delta.y)}}0===this.moveDelta.x&&0===this.moveDelta.y||(this.lastMoveDelta.x=this.moveDelta.x,this.lastMoveDelta.y=this.moveDelta.y)}},{key:"every",value:function(t){t.currentDirection.x=0,t.currentDirection.y=0,this.lastMoveDelta.x===this.moveDelta.x&&this.lastMoveDelta.y===this.moveDelta.y?(null===this.timer&&(t.currentDirection.x=this.moveDelta.x,t.currentDirection.y=this.moveDelta.y,this.timer=0),this.timer+=P.val,this.timer>=this.movementSpeed&&(t.currentDirection.x=this.moveDelta.x,t.currentDirection.y=this.moveDelta.y,this.timer-=this.movementSpeed)):this.timer=null,t.lastDirection.x=this.lastMoveDelta.x,t.lastDirection.y=this.lastMoveDelta.y}},{key:"makeKey",value:function(t,e){return{delta:{x:t,y:e},down:!1}}},{key:"resetKeys",value:function(){for(var t in this.keys)this.keys[t].down=!1}},{key:"bindKey",value:function(t){var e=this;K.bind(t,function(){e.keys[t].down=!0}),K.bind(t,function(){e.keys[t].down=!1},"keyup")}},{key:"initKeyboardInput",value:function(){var t=this;this.keys={w:this.makeKey(0,-1),a:this.makeKey(-1,0),s:this.makeKey(0,1),d:this.makeKey(1,0),up:this.makeKey(0,-1),left:this.makeKey(-1,0),down:this.makeKey(0,1),right:this.makeKey(1,0)};for(var e in this.keys)this.bindKey(e);K.bind("shift",function(){t.movementSpeed=.05}),K.bind("shift",function(){t.movementSpeed=.2},"keyup")}},{key:"initTouchInput",value:function(){var t=this,e={};e[U.DIRECTION_LEFT]={x:-1,y:0},e[U.DIRECTION_RIGHT]={x:1,y:0},e[U.DIRECTION_UP]={x:0,y:-1},e[U.DIRECTION_DOWN]={x:0,y:1},Y.on("pan",function(n){if(!t.touching)if(Math.abs(n.velocity)>.3&&n.offsetDirection in e){var i=e[n.offsetDirection];t.touching=!0,t.moveDelta={x:i.x,y:i.y}}else t.touching=!1}),Y.on("panend",function(e){t.touching=!1})}}]),t}()),E.system(["logic"],function(){function t(){c(this,t)}return h(t,[{key:"init",value:function(){}},{key:"pre",value:function(){var t=this;E.every(["inputMovement","position"],function(e,n,i){0===e.currentDirection.x&&0===e.currentDirection.y||t.processAction({move:i,direction:{x:e.currentDirection.x,y:e.currentDirection.y}})})}},{key:"processActions",value:function(t){for(var e=!0;t.length>0;){var n=t.pop();if(e=this.processAction(n),!e)break}return e}},{key:"processAction",value:function(t){t.debug&&console.log(t.debug);for(var e=["move","change","create","destroy","custom"],n=0;n<e.length;n++){var i=e[n];if(i in t)return this[i](t)}return!1}},{key:"triggerForAll",value:function(t,e,n){var i={actions:[],allow:!0},o=C.get(t),r=!0,s=!1,a=void 0;try{for(var u,l=o.values()[Symbol.iterator]();!(r=(u=l.next()).done);r=!0){var c=u.value,h=c.get("logic");if(h&&e in h&&"function"==typeof h[e]){var p=n(c),f=h[e](p);if(f){if(f.allow===!1){i.allow=!1;break}f.actions&&(i.actions=i.actions.concat(f.actions))}}}}catch(t){s=!0,a=t}finally{try{!r&&l.return&&l.return()}finally{if(s)throw a}}return i.allow&&(i.allow=this.processActions(i.actions)),i.allow}},{key:"move",value:function(t){var e=!1,n=t.move,i=n.get("position"),o=t.direction,r=t.to;o?r={x:i.x+o.x,y:i.y+o.y}:r&&(o={x:r.x-i.x,y:r.y-i.y});var s={x:i.x,y:i.y},a=void 0,u=n.get("logic");if(u&&u.onMove&&(a=u.onMove({entity:n,oldPosition:s,newPosition:r,entities:C.get(r),direction:o})),void 0===a||a&&a.allow!==!1){var l=function(t){return{oldPosition:s,newPosition:r,entity:n,baseEntity:t,direction:o}},c=this.triggerForAll(s,"onExit",l),h=this.triggerForAll(r,"onEnter",l);if(c&&h){if(a&&a.actions){var p=this.processActions(a.actions);if(!p)return!1}i.set(r.x,r.y),C.update(n),e=!0}}return e}},{key:"change",value:function(t){var e=!1;if(t.change.has("sprite")){var n=t.change.get("sprite");n.set(t.to),e=!0}return e}},{key:"create",value:function(t){var e={name:t.create,position:{x:t.at.x,y:t.at.y},spritePosition:A.getVisualPosition(t.at),layer:5},n=A.createEntity(e,15);return"function"==typeof t.thenCall&&t.thenCall(n),!0}},{key:"destroy",value:function(t){return t.destroy.destroy(),!0}},{key:"custom",value:function(t){var e=!1;return e}}]),t}()),E.system([],function(){function t(){c(this,t)}return h(t,[{key:"init",value:function(){this.player=this.createPlayer({x:128,y:128})}},{key:"pre",value:function(){var t=this;N.process("resetPlayer",function(e){t.player.valid()||(t.player=t.createPlayer(e.position));var n=t.player.get("position");n.x=e.position.x,n.y=e.position.y,C.update(t.player)})}},{key:"createPlayer",value:function(t){var e=this,n=A.getVisualPosition(t),i=E.entity();return i.set("player").set("inputMovement").set("position",t.x,t.y).set("sprite",M,"player",20,n).set("cameraFollows").set("pushes").set("presses").set("enters").set("logic",{onMove:function(t){return e.onPlayerMove(t)}}),C.update(i),i}},{key:"onPlayerMove",value:function(t){var e={actions:[]};if(0===t.entities.size)e.allow=!1;else{var n=!0,i=!1,o=void 0;try{for(var r,s=t.entities.values()[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var a=r.value;if(a.has("blocksMovement")){e.allow=!1;break}}}catch(t){i=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}}return e}}]),t}()),E.system([],function(){function t(){c(this,t)}return h(t,[{key:"init",value:function(){var t=this;A.register(["wall"],function(e,n){t.createWallEntity(e)})}},{key:"createWallEntity",value:function(t){t.set("blocksMovement").set("logic",{onEnter:function(t){return{allow:!1}}})}}]),t}()),E.system(["pushable"],function(){function t(){c(this,t)}return h(t,[{key:"init",value:function(){var t=this;A.register(["block_none"],function(e,n){e.set("pushable").set("pushes").set("presses").set("logic",{onEnter:function(e){return t.blockEntered(e)}}),e.get("sprite").setZIndex(10)})}},{key:"blockEntered",value:function(t){var e={actions:[],allow:t.entity.has("pushes")};return e.allow&&e.actions.push({move:t.baseEntity,direction:t.direction}),e}}]),t}()),E.system([],function(){function t(){c(this,t),this.currentPuzzle=null,this.lastPuzzle=null}return h(t,[{key:"pre",value:function(){var t=this;N.process("restart",function(){t.enterLevel(t.currentPuzzle)}),N.process("enterLevel",function(e){t.enterLevel(e)}),N.process("exitLevel",function(e){t.exitLevel(e)})}},{key:"enterLevel",value:function(t){t&&(N.send("loadTiles",{layer:t.layer,puzzle:t,animate:!this.currentPuzzle||this.currentPuzzle&&this.currentPuzzle.tileId!==t.tileId}),this.currentPuzzle=t,N.send("resetPlayer",{position:this.currentPuzzle.position}))}},{key:"exitLevel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.currentPuzzle&&(t&&console.log("Puzzle complete!"),N.send("resetPlayer",{position:this.currentPuzzle.position}),"portal_solved"!==this.currentPuzzle.state&&(this.currentPuzzle.state=t?"portal_solved":"portal_unsolved"),N.send("updatePuzzlePortal",{id:this.currentPuzzle.tileId,state:this.currentPuzzle.state}),N.send("loadTiles",{layer:"world",puzzle:this.currentPuzzle}),this.currentPuzzle=null)}}]),t}()),E.system(["puzzleGoal"],function(){function t(){c(this,t),this.solved=!0}return h(t,[{key:"init",value:function(){var t=this;A.register(["puzzle_end","puzzle_end_done"],function(e,n){e.set("puzzleGoal","puzzle_end_done"===n.name).set("logic",{onEnter:function(e){t.enterPuzzleGoal(e)}})})}},{key:"pre",value:function(){var t=this;this.solved=!0,E.every(["goal"],function(e,n){e.solved||(t.solved=!1)})}},{key:"every",value:function(t,e){if(t.completed!==this.solved){t.completed=this.solved;var n=e.get("sprite");n&&n.set(t.completed?"puzzle_end_done":"puzzle_end")}}},{key:"enterPuzzleGoal",value:function(t){var e=t.baseEntity.get("puzzleGoal");e.completed&&(t.entity.has("player")||t.entity.has("vehicle"))&&N.send("exitLevel",e.completed)}}]),t}()),E.system([],function(){function t(){c(this,t),this.toUpdate=[]}return h(t,[{key:"init",value:function(){var t=this;A.register(["button_goal"],function(e){e.set("goal").set("logic",{onEnter:function(e){t.toUpdate.push(e.baseEntity)},onExit:function(e){t.toUpdate.push(e.baseEntity)}})})}},{key:"pre",value:function(){this.updateButtonGoals()}},{key:"updateButtonGoals",value:function(){var t=!0,e=!1,n=void 0;try{for(var i,o=this.toUpdate[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var r=i.value,s=r.get("goal");s.solved=C.has(r,"presses")}}catch(t){e=!0,n=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw n}}this.toUpdate=[]}}]),t}()),E.system(["puzzlePortal"],function(){function t(){c(this,t),this.puzzlePortals={}}return h(t,[{key:"init",value:function(){var t=this;A.register(["portal_unexplored","portal_unsolved","portal_solved"],function(e,n){t.processUpdateEvents(),n.id in t.puzzlePortals&&(n.name=t.puzzlePortals[n.id]),e.get("sprite").set(n.name),e.set("puzzlePortal",{layer:"lvl-"+n.id,position:n.position,state:n.name,tileId:n.id}).set("logic",{onEnter:function(e){t.enterPortal(e)}})})}},{key:"pre",value:function(){this.processUpdateEvents()}},{key:"processUpdateEvents",value:function(){var t=this;N.process("updatePuzzlePortal",function(e){t.puzzlePortals[e.id]=e.state})}},{key:"enterPortal",value:function(t){if(t.entity.has("player")){var e=t.baseEntity.get("puzzlePortal").puzzle;N.send("enterLevel",e)}}}]),t}()),E.system([],function(){function t(){c(this,t)}return h(t,[{key:"init",value:function(){this.puzzleCamera=E.entity()}},{key:"pre",value:function(){var t=this;N.loop("loaded",function(e){var n=E.every(["player"]).next().value;n&&t.setupPlayer(n,e)})}},{key:"setupPlayer",value:function(t,e){if("world"===e.layer)this.puzzleCamera.removeAll(),t.set("cameraFollows");else{var n=this.getPuzzleCenter();t.remove("cameraFollows"),this.puzzleCamera.set("cameraFollows").set("sprite",M,void 0,void 0,n)}}},{key:"getPuzzleCenter",value:function(){var t={x:1/0,y:1/0},e={x:0,y:0};E.every(["partOfLayer","position"],function(n,i){t.x=Math.min(t.x,i.x),t.y=Math.min(t.y,i.y),e.x=Math.max(e.x,i.x),e.y=Math.max(e.y,i.y)});var n=A.getVisualPosition({x:(e.x+t.x)/2,y:(e.y+t.y)/2});return n}}]),t}()),E.system([""],function(){function t(){c(this,t)}return h(t,[{key:"init",value:function(){A.register(["puzzle_start"],function(t,e){t.remove("sprite")})}}]),t}()),E.system([],function(){function t(){c(this,t)}return h(t,[{key:"init",value:function(){var t=this;A.register(["vehicle","vehicle_with_package"],function(e,n){t.createVehicle(e,n)})}},{key:"pre",value:function(){var t=this;N.process("updateVehicle",function(e){t.updateVehicle(e)})}},{key:"updateVehicle",value:function(t){var e="vehicle",n=t.has("inputMovement");e=t.has("hasPackage")?n?"vehicle_player_with_package":"vehicle_with_package":n?"vehicle_player":"vehicle",t.get("sprite").set(e)}},{key:"createVehicle",value:function(t,e){var n=this;t.set("vehicle").set("enterable").set("goal",!0).set("logic",{onEnter:function(t){return n.enterVehicle(t)},onMove:function(t){return n.moveVehicle(t)}}),t.get("sprite").setZIndex(12),"vehicle_with_package"===e.name&&t.set("hasPackage")}},{key:"enterVehicle",value:function(t){var e={allow:!1};if(t.entity.has("enters"))t.entity.destroy(),t.baseEntity.set("inputMovement"),this.updateVehicle(t.baseEntity),e.allow=!0;else if(t.entity.has("package")&&!t.baseEntity.has("hasPackage"))t.baseEntity.set("hasPackage",t.entity.get("package").name),this.updateVehicle(t.baseEntity),t.entity.destroy(),t.baseEntity.get("goal").solved=!1,e.allow=!0;else if(t.entity.has("vehicle")){if(t.entity.has("hasPackage")&&!t.baseEntity.has("hasPackage")){var n=t.entity.get("hasPackage").name;t.baseEntity.set("hasPackage",n),t.entity.remove("hasPackage"),t.baseEntity.get("goal").solved=!1,t.entity.get("goal").solved=!0}t.entity.remove("inputMovement"),t.baseEntity.set("inputMovement"),this.updateVehicle(t.entity),this.updateVehicle(t.baseEntity)}return e}},{key:"moveVehicle",value:function(t){var e=this,n={actions:[{create:"pollution",at:t.oldPosition,thenCall:function(t){return e.createPollution(t)}}]};return n}},{key:"createPollution",value:function(t){t.set("logic",{onEnter:function(t){return{allow:!1}}})}}]),t}()),E.system([],function(){function t(){c(this,t)}return h(t,[{key:"init",value:function(){var t=this;A.register(["package"],function(e,n){t.createPackageEntity(e)})}},{key:"createPackageEntity",value:function(t){var e=this;t.set("goal").set("package").set("presses"),t.get("sprite").setZIndex(10),t.set("logic",{onEnter:function(t){var n={allow:!1};return t.entity.has("vehicle")?e.handleVehicleEntered(t,n):t.entity.has("pushes")&&e.handlePush(t,n),n}})}},{key:"handleVehicleEntered",value:function(t,e){t.entity.has("hasPackage")||(t.entity.set("hasPackage",t.baseEntity.get("package").name),t.baseEntity.destroy(),t.entity.get("goal").solved=!1,e.allow=!0,N.send("updateVehicle",t.entity))}},{key:"handlePush",value:function(t,e){e.allow=!0,e.actions=[{move:t.baseEntity,direction:t.direction}]}}]),t}()),E.system([],function(){function t(){c(this,t)}return h(t,[{key:"init",value:function(){var t=this;A.register(["destination_solved","destination_unsolved"],function(e,n){t.createDestinationEntity(e,n)})}},{key:"createDestinationEntity",value:function(t,e){t.set("goal","destination_solved"===e.name),t.set("logic",{onEnter:function(t){var e={allow:!0};return t.entity.has("hasPackage")&&(t.entity.remove("hasPackage"),t.baseEntity.get("goal").solved=!0,t.baseEntity.get("sprite").set("destination_solved"),t.entity.has("goal")&&(t.entity.get("goal").solved=!0),t.entity.has("vehicle")&&N.send("updateVehicle",t.entity)),e}})}}]),t}()),E.system(["sprite","position"],function(){function t(){c(this,t)}return h(t,[{key:"every",value:function(t,e,n){var i=r(t.sprite.position,e);if(i){var o=n.get("tween");if(o)o.update(i);else{var s=200;n.has("loadAnimation")&&(s=600,n.remove("loadAnimation")),n.set("tween",n,t.sprite.position,i,s)}}}}]),t}()),E.system(["tween"],function(){function t(){c(this,t)}return h(t,[{key:"pre",value:function(){var t=E.every(["tween"]),e=!0,n=!1,i=void 0;try{for(var o,r=t[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var s=o.value;s.get("tween").updateAll();break}}catch(t){n=!0,i=t}finally{try{!e&&r.return&&r.return()}finally{if(n)throw i}}}}]),t}()),E.system(["cameraFollows","sprite"],function(){function t(){c(this,t)}return h(t,[{key:"every",value:function(t,e,n){var i=e.sprite.position;N.exists("updateCamera")&&(t.update(),N.clear("updateCamera")),t.center&&(this.centerCamera(i,t),t.center=!1),i.x>t.deadzone.x+t.deadzone.width&&(t.deadzone.x=i.x-t.deadzone.width),i.x<t.deadzone.x&&(t.deadzone.x=i.x),i.y>t.deadzone.y+t.deadzone.height&&(t.deadzone.y=i.y-t.deadzone.height),i.y<t.deadzone.y&&(t.deadzone.y=i.y),M.position.x=-t.deadzone.x+t.borderSize.x,M.position.y=-t.deadzone.y+t.borderSize.y}},{key:"centerCamera",value:function(t,e){e.deadzone.x=t.x-e.deadzone.width/2,e.deadzone.y=t.y-e.deadzone.height/2}}]),t}()),E.system(["pixiStage"],function(){function t(){c(this,t),this.renderer=null}return h(t,[{key:"init",value:function(){this.renderer=PIXI.autoDetectRenderer(_.width,_.height,{antialias:!1}),document.body.appendChild(this.renderer.view),E.entity().set("pixiStage",I)}},{key:"every",value:function(t){this.renderer.render(t.root)}}]),t}());var W=0;s()}();
